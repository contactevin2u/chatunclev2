@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   THEME VARIABLES - Light Mode (Default)
   ============================================ */
:root {
  /* Background colors */
  --bg-primary: 255, 255, 255;
  --bg-secondary: 249, 250, 251;
  --bg-tertiary: 243, 244, 246;
  --bg-chat: 229, 221, 213;

  /* Text colors */
  --text-primary: 17, 24, 39;
  --text-secondary: 107, 114, 128;
  --text-tertiary: 156, 163, 175;

  /* Border colors */
  --border-primary: 229, 231, 235;
  --border-secondary: 209, 213, 219;

  /* Chat bubble colors */
  --bubble-sent: 220, 248, 198;
  --bubble-received: 255, 255, 255;

  /* Accent colors */
  --accent-primary: 37, 99, 235;
  --accent-success: 22, 163, 74;
  --accent-danger: 239, 68, 68;

  /* Sidebar */
  --sidebar-bg: 255, 255, 255;
  --sidebar-hover: 243, 244, 246;
  --sidebar-active: 240, 253, 244;

  /* Input */
  --input-bg: 255, 255, 255;
  --input-border: 209, 213, 219;

  /* Scrollbar */
  --scrollbar-track: 241, 241, 241;
  --scrollbar-thumb: 193, 193, 193;
  --scrollbar-hover: 168, 168, 168;
}

/* ============================================
   DARK MODE VARIABLES
   ============================================ */
.dark {
  /* Background colors */
  --bg-primary: 17, 24, 39;
  --bg-secondary: 31, 41, 55;
  --bg-tertiary: 55, 65, 81;
  --bg-chat: 30, 30, 30;

  /* Text colors */
  --text-primary: 243, 244, 246;
  --text-secondary: 156, 163, 175;
  --text-tertiary: 107, 114, 128;

  /* Border colors */
  --border-primary: 55, 65, 81;
  --border-secondary: 75, 85, 99;

  /* Chat bubble colors */
  --bubble-sent: 0, 92, 75;
  --bubble-received: 38, 45, 53;

  /* Sidebar */
  --sidebar-bg: 17, 24, 39;
  --sidebar-hover: 31, 41, 55;
  --sidebar-active: 6, 78, 59;

  /* Input */
  --input-bg: 31, 41, 55;
  --input-border: 55, 65, 81;

  /* Scrollbar */
  --scrollbar-track: 31, 41, 55;
  --scrollbar-thumb: 75, 85, 99;
  --scrollbar-hover: 107, 114, 128;
}

/* ============================================
   BASE STYLES
   ============================================ */
body {
  color: rgb(var(--text-primary));
  background: rgb(var(--bg-secondary));
  transition: background-color 0.2s ease, color 0.2s ease;
}

/* ============================================
   CUSTOM SCROLLBAR
   ============================================ */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: rgb(var(--scrollbar-track));
}

::-webkit-scrollbar-thumb {
  background: rgb(var(--scrollbar-thumb));
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgb(var(--scrollbar-hover));
}

/* ============================================
   CHAT BUBBLE STYLES
   ============================================ */
.chat-bubble-sent {
  background-color: rgb(var(--bubble-sent));
  @apply rounded-lg rounded-tr-none;
}

.chat-bubble-received {
  background-color: rgb(var(--bubble-received));
  @apply rounded-lg rounded-tl-none;
}

/* ============================================
   DARK MODE OVERRIDES
   ============================================ */
.dark .bg-white {
  background-color: rgb(var(--bg-primary)) !important;
}

.dark .bg-gray-50 {
  background-color: rgb(var(--bg-secondary)) !important;
}

.dark .bg-gray-100 {
  background-color: rgb(var(--bg-tertiary)) !important;
}

.dark .border-gray-200 {
  border-color: rgb(var(--border-primary)) !important;
}

.dark .border-gray-100 {
  border-color: rgb(var(--border-primary)) !important;
}

.dark .text-gray-900 {
  color: rgb(var(--text-primary)) !important;
}

.dark .text-gray-700 {
  color: rgb(var(--text-secondary)) !important;
}

.dark .text-gray-600 {
  color: rgb(var(--text-secondary)) !important;
}

.dark .text-gray-500 {
  color: rgb(var(--text-tertiary)) !important;
}

.dark .text-gray-400 {
  color: rgb(var(--text-tertiary)) !important;
}

.dark .hover\:bg-gray-50:hover {
  background-color: rgb(var(--bg-secondary)) !important;
}

.dark .hover\:bg-gray-100:hover {
  background-color: rgb(var(--bg-tertiary)) !important;
}

.dark .hover\:bg-gray-200:hover {
  background-color: rgb(var(--bg-tertiary)) !important;
}

.dark .active\:bg-gray-100:active {
  background-color: rgb(var(--bg-tertiary)) !important;
}

.dark .active\:bg-gray-200:active {
  background-color: rgb(75, 85, 99) !important;
}

.dark .active\:bg-gray-300:active {
  background-color: rgb(107, 114, 128) !important;
}

/* Input fields in dark mode */
.dark input,
.dark textarea,
.dark select {
  background-color: rgb(var(--input-bg)) !important;
  border-color: rgb(var(--input-border)) !important;
  color: rgb(var(--text-primary)) !important;
}

.dark input::placeholder,
.dark textarea::placeholder {
  color: rgb(var(--text-tertiary)) !important;
}

/* Chat background */
.dark .bg-\[\#E5DDD5\] {
  background-color: rgb(var(--bg-chat)) !important;
}

.dark .bg-\[\#F0F2F5\] {
  background-color: rgb(var(--bg-secondary)) !important;
}

/* Shadows in dark mode */
.dark .shadow-sm {
  box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.3) !important;
}

.dark .shadow-md {
  box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.3), 0 2px 4px -2px rgb(0 0 0 / 0.3) !important;
}

.dark .shadow-lg {
  box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.3), 0 4px 6px -4px rgb(0 0 0 / 0.3) !important;
}

/* Dropdown/Modal backgrounds */
.dark .bg-black\/20 {
  background-color: rgba(0, 0, 0, 0.5) !important;
}

.dark .bg-black\/50 {
  background-color: rgba(0, 0, 0, 0.7) !important;
}

/* Gray background variations */
.dark .bg-gray-200 {
  background-color: rgb(var(--bg-tertiary)) !important;
}

.dark .bg-gray-300 {
  background-color: rgb(75, 85, 99) !important;
}

/* WhatsApp green tints in dark mode */
.dark .bg-green-50 {
  background-color: rgba(6, 78, 59, 0.3) !important;
}

.dark .bg-green-100 {
  background-color: rgba(6, 78, 59, 0.5) !important;
}

/* Blue tints in dark mode */
.dark .bg-blue-50 {
  background-color: rgba(30, 58, 138, 0.3) !important;
}

.dark .bg-blue-100 {
  background-color: rgba(30, 58, 138, 0.5) !important;
}

/* Yellow tints in dark mode */
.dark .bg-yellow-100 {
  background-color: rgba(113, 63, 18, 0.5) !important;
}

/* Red tints in dark mode */
.dark .bg-red-50 {
  background-color: rgba(127, 29, 29, 0.3) !important;
}

/* Avatar/icon backgrounds */
.dark .bg-gray-300.rounded-full {
  background-color: rgb(75, 85, 99) !important;
}

/* Dividers */
.dark .divide-gray-100 > :not([hidden]) ~ :not([hidden]) {
  border-color: rgb(var(--border-primary)) !important;
}

/* ============================================
   THEME TOGGLE ANIMATION
   ============================================ */
.theme-toggle-icon {
  transition: transform 0.3s ease, opacity 0.2s ease;
}

.dark .theme-toggle-sun {
  transform: rotate(180deg);
  opacity: 0;
}

.dark .theme-toggle-moon {
  transform: rotate(0deg);
  opacity: 1;
}

.theme-toggle-sun {
  transform: rotate(0deg);
  opacity: 1;
}

.theme-toggle-moon {
  transform: rotate(-180deg);
  opacity: 0;
}

/* ============================================
   IMPROVED DARK MODE CONTRAST - HIGH VISIBILITY
   ============================================ */

/* ===================
   TEXT COLORS - BRIGHT FOR READABILITY
   =================== */

/* Primary text - near white */
.dark .text-gray-900 {
  color: rgb(255, 255, 255) !important;
}

/* Secondary text - light gray */
.dark .text-gray-700 {
  color: rgb(229, 231, 235) !important;
}

.dark .text-gray-600 {
  color: rgb(209, 213, 219) !important;
}

/* Tertiary text - still visible */
.dark .text-gray-500 {
  color: rgb(186, 193, 205) !important;
}

.dark .text-gray-400 {
  color: rgb(166, 173, 185) !important;
}

.dark .text-gray-300 {
  color: rgb(209, 213, 219) !important;
}

/* ===================
   BORDERS - VISIBLE
   =================== */

.dark .border {
  border-color: rgb(100, 116, 139) !important;
}

.dark .border-dashed {
  border-color: rgb(148, 163, 184) !important;
}

.dark .border-gray-200,
.dark .border-gray-300 {
  border-color: rgb(100, 116, 139) !important;
}

/* ===================
   BADGES - HIGH CONTRAST
   =================== */

/* Purple badges */
.dark .bg-purple-100 {
  background-color: rgba(168, 85, 247, 0.35) !important;
}

.dark .text-purple-700 {
  color: rgb(233, 213, 255) !important;
}

/* Blue badges */
.dark .bg-blue-100 {
  background-color: rgba(59, 130, 246, 0.35) !important;
}

.dark .text-blue-700 {
  color: rgb(191, 219, 254) !important;
}

/* Gray badges */
.dark .bg-gray-100 {
  background-color: rgb(55, 65, 81) !important;
}

/* ===================
   BUTTONS & INTERACTIVE
   =================== */

/* WhatsApp green buttons */
.dark .bg-whatsapp-dark {
  background-color: rgb(34, 197, 94) !important;
}

.dark .hover\:bg-whatsapp-teal:hover {
  background-color: rgb(22, 163, 74) !important;
}

/* Green hover states */
.dark .hover\:border-whatsapp-dark:hover {
  border-color: rgb(74, 222, 128) !important;
}

.dark .hover\:bg-green-50:hover {
  background-color: rgba(34, 197, 94, 0.2) !important;
}

.dark .bg-green-50 {
  background-color: rgba(34, 197, 94, 0.15) !important;
}

/* Tab buttons - active */
.dark .bg-white.shadow-sm {
  background-color: rgb(71, 85, 105) !important;
}

/* ===================
   MODAL & OVERLAYS
   =================== */

.dark .bg-black.bg-opacity-50 {
  background-color: rgba(0, 0, 0, 0.8) !important;
}

.dark .shadow-xl {
  box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.6), 0 8px 10px -6px rgb(0 0 0 / 0.6) !important;
}

/* ===================
   FORM ELEMENTS
   =================== */

.dark input,
.dark textarea,
.dark select {
  background-color: rgb(30, 41, 59) !important;
  border-color: rgb(100, 116, 139) !important;
  color: rgb(248, 250, 252) !important;
}

.dark input::placeholder,
.dark textarea::placeholder {
  color: rgb(148, 163, 184) !important;
}

/* Number inputs in sequences */
.dark input[type="number"] {
  background-color: rgb(30, 41, 59) !important;
  color: rgb(248, 250, 252) !important;
}

/* ===================
   CARDS & CONTAINERS
   =================== */

.dark .bg-gray-50 {
  background-color: rgb(30, 41, 59) !important;
}

.dark .rounded-lg.bg-gray-100 {
  background-color: rgb(30, 41, 59) !important;
}

/* ===================
   ICONS
   =================== */

.dark .text-gray-500 svg,
.dark .text-gray-400 svg {
  color: rgb(186, 193, 205) !important;
}

/* ===================
   MEDIA ELEMENTS
   =================== */

.dark audio,
.dark video {
  filter: invert(0.85) hue-rotate(180deg);
  border-radius: 8px;
}

/* ===================
   MISC STATES
   =================== */

.dark .disabled\:opacity-50:disabled {
  opacity: 0.65 !important;
}

/* Recording indicator - keep red visible */
.dark .bg-red-500 {
  background-color: rgb(248, 113, 113) !important;
}

.dark .text-red-500 {
  color: rgb(252, 165, 165) !important;
}

/* Small text readability boost */
.dark .text-xs {
  font-weight: 500 !important;
}

/* ============================================
   MOBILE BOTTOM NAVIGATION SAFE AREA
   ============================================ */
.safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom, 0);
}

/* Add padding to main content when bottom nav is present */
@media (max-width: 767px) {
  .has-bottom-nav {
    padding-bottom: calc(4rem + env(safe-area-inset-bottom, 0));
  }
}

/* ============================================
   MOBILE VIEW TRANSITIONS
   ============================================ */
.mobile-slide-enter {
  transform: translateX(100%);
}

.mobile-slide-enter-active {
  transform: translateX(0);
  transition: transform 250ms ease-out;
}

.mobile-slide-exit {
  transform: translateX(0);
}

.mobile-slide-exit-active {
  transform: translateX(100%);
  transition: transform 200ms ease-in;
}

/* Fade transition for lists */
.mobile-fade-enter {
  opacity: 0;
}

.mobile-fade-enter-active {
  opacity: 1;
  transition: opacity 200ms ease-out;
}

/* ============================================
   BOTTOM SHEET STYLES
   ============================================ */
.bottom-sheet {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 60;
  border-top-left-radius: 1rem;
  border-top-right-radius: 1rem;
  transform: translateY(100%);
  transition: transform 300ms ease-out;
}

.bottom-sheet.open {
  transform: translateY(0);
}

.bottom-sheet-handle {
  width: 2.5rem;
  height: 0.25rem;
  background: rgb(var(--text-tertiary));
  border-radius: 9999px;
  margin: 0.5rem auto 0.75rem;
}

/* ============================================
   IMPROVED TOUCH TARGETS
   ============================================ */
@media (max-width: 767px) {
  /* Larger touch targets on mobile */
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }

  /* Active state feedback */
  .touch-feedback:active {
    transform: scale(0.97);
    transition: transform 100ms ease-out;
  }
}

/* ============================================
   MOBILE CHAT TRANSITIONS
   ============================================ */
.chat-view-transition {
  transition: transform 250ms cubic-bezier(0.4, 0, 0.2, 1);
}

.chat-list-view {
  transform: translateX(0);
}

.chat-detail-view {
  transform: translateX(-100%);
}

/* When showing chat on mobile */
@media (max-width: 767px) {
  .mobile-show-chat .chat-list-container {
    transform: translateX(-100%);
  }

  .mobile-show-chat .chat-detail-container {
    transform: translateX(0);
  }
}

/* ============================================
   MOBILE BOTTOM NAVIGATION DARK MODE
   ============================================ */
.dark nav.safe-area-bottom {
  background-color: rgb(17, 24, 39) !important;
  border-color: rgb(55, 65, 81) !important;
}

.dark .bottom-sheet {
  background-color: rgb(17, 24, 39) !important;
}

.dark .bottom-sheet-handle {
  background-color: rgb(75, 85, 99) !important;
}

/* Selection highlight in conversation list */
.dark .bg-green-50 {
  background-color: rgba(34, 197, 94, 0.15) !important;
}

.dark .border-green-500 {
  border-color: rgb(34, 197, 94) !important;
}
